!function(){"use strict";var s=window.Document.prototype.createElement,c=window.Document.prototype.createElementNS,u=window.Document.prototype.importNode,d=window.Document.prototype.prepend,h=window.Document.prototype.append,m=window.DocumentFragment.prototype.prepend,p=window.DocumentFragment.prototype.append,g=window.Node.prototype.cloneNode,f=window.Node.prototype.appendChild,y=window.Node.prototype.insertBefore,v=window.Node.prototype.removeChild,w=window.Node.prototype.replaceChild,E=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),b=window.Element.prototype.attachShadow,S=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),C=window.Element.prototype.getAttribute,_=window.Element.prototype.setAttribute,k=window.Element.prototype.removeAttribute,T=window.Element.prototype.getAttributeNS,D=window.Element.prototype.setAttributeNS,N=window.Element.prototype.removeAttributeNS,B=window.Element.prototype.insertAdjacentElement,L=window.Element.prototype.insertAdjacentHTML,O=window.Element.prototype.prepend,I=window.Element.prototype.append,M=window.Element.prototype.before,F=window.Element.prototype.after,A=window.Element.prototype.replaceWith,j=window.Element.prototype.remove,P=window.HTMLElement,x=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),R=window.HTMLElement.prototype.insertAdjacentElement,U=window.HTMLElement.prototype.insertAdjacentHTML,n=new Set;function o(e){var t=n.has(e);return e=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e),!t&&e}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(e){return n.add(e)});var a=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function V(e){var t=e.isConnected;if(void 0!==t)return t;if(a(e))return!0;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function H(e){var t=e.children;if(t)return Array.prototype.slice.call(t);for(t=[],e=e.firstChild;e;e=e.nextSibling)e.nodeType===Node.ELEMENT_NODE&&t.push(e);return t}function l(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function z(){var e=!(null==le||!le.noDocumentConstructionObserver),t=!(null==le||!le.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=t,this.I=!e}function $(e,t,n,o){var a=window.ShadyDOM;if(e.shadyDomFastWalk&&a&&a.inUse){if(t.nodeType===Node.ELEMENT_NODE&&n(t),t.querySelectorAll)for(e=a.nativeMethods.querySelectorAll.call(t,"*"),t=0;t<e.length;t++)n(e[t])}else!function e(t,n,o){for(var a=t;a;){if(a.nodeType===Node.ELEMENT_NODE){var i=a;n(i);var r=i.localName;if("link"===r&&"import"===i.getAttribute("rel")){if(a=i.import,void 0===o&&(o=new Set),a instanceof Node&&!o.has(a))for(o.add(a),a=a.firstChild;a;a=a.nextSibling)e(a,n,o);a=l(t,i);continue}if("template"===r){a=l(t,i);continue}if(i=i.__CE_shadowRoot)for(i=i.firstChild;i;i=i.nextSibling)e(i,n,o)}a=a.firstChild||l(t,a)}}(t,n,o)}function Z(t,e){t.j&&$(t,e,function(e){return Q(t,e)})}function Q(e,t){if(e.j&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.m.length;n++)e.m[n](t);for(n=0;n<e.g.length;n++)e.g[n](t)}}function W(e,t){var n=[];for($(e,t,function(e){return n.push(e)}),t=0;t<n.length;t++){var o=n[t];1===o.__CE_state?e.connectedCallback(o):J(e,o)}}function K(e,t){var n=[];for($(e,t,function(e){return n.push(e)}),t=0;t<n.length;t++){var o=n[t];1===o.__CE_state&&e.disconnectedCallback(o)}}function q(o,e,t){var a=(t=void 0===t?{}:t).J,i=t.upgrade||function(e){return J(o,e)},r=[];for($(o,e,function(n){var e;o.j&&Q(o,n),"link"===n.localName&&"import"===n.getAttribute("rel")?((e=n.import)instanceof Node&&(e.__CE_isImportDocument=!0,e.__CE_registry=document.__CE_registry),e&&"complete"===e.readyState?e.__CE_documentLoadHandled=!0:n.addEventListener("load",function(){var t,e=n.import;e.__CE_documentLoadHandled||(e.__CE_documentLoadHandled=!0,t=new Set,a&&(a.forEach(function(e){return t.add(e)}),t.delete(e)),q(o,e,{J:t,upgrade:i}))})):r.push(n)},a),e=0;e<r.length;e++)i(r[e])}function J(e,t){try{var n=t.ownerDocument,o=n.__CE_registry;if((i=o&&(n.defaultView||n.__CE_isImportDocument)?oe(o,t.localName):void 0)&&void 0===t.__CE_state){i.constructionStack.push(t);try{try{if(new i.constructorFunction!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{i.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,(t.__CE_definition=i).attributeChangedCallback&&t.hasAttributes())for(var a=i.observedAttributes,i=0;i<a.length;i++){var r=a[i],l=t.getAttribute(r);null!==l&&e.attributeChangedCallback(t,r,null,l,null)}V(t)&&e.connectedCallback(t)}}catch(e){X(e)}}function G(t,n,o,a){var e=n.__CE_registry;if(e&&(null===a||"http://www.w3.org/1999/xhtml"===a)&&(e=oe(e,o)))try{var i=new e.constructorFunction;if(void 0===i.__CE_state||void 0===i.__CE_definition)throw Error("Failed to construct '"+o+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==i.namespaceURI)throw Error("Failed to construct '"+o+"': The constructed element's namespace must be the HTML namespace.");if(i.hasAttributes())throw Error("Failed to construct '"+o+"': The constructed element must not have any attributes.");if(null!==i.firstChild)throw Error("Failed to construct '"+o+"': The constructed element must not have any children.");if(null!==i.parentNode)throw Error("Failed to construct '"+o+"': The constructed element must not have a parent node.");if(i.ownerDocument!==n)throw Error("Failed to construct '"+o+"': The constructed element's owner document is incorrect.");if(i.localName!==o)throw Error("Failed to construct '"+o+"': The constructed element's local name is incorrect.");return i}catch(e){return X(e),n=null===a?s.call(n,o):c.call(n,a,o),Object.setPrototypeOf(n,HTMLUnknownElement.prototype),n.__CE_state=2,n.__CE_definition=void 0,Q(t,n),n}return Q(t,n=null===a?s.call(n,o):c.call(n,a,o)),n}function X(e){var t=e.message,n=e.sourceURL||e.fileName||"",o=e.line||e.lineNumber||0,a=e.column||e.columnNumber||0,i=void 0;void 0===ErrorEvent.prototype.initErrorEvent?i=new ErrorEvent("error",{cancelable:!0,message:t,filename:n,lineno:o,colno:a,error:e}):((i=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,t,n,o),i.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===i.error&&Object.defineProperty(i,"error",{configurable:!0,enumerable:!0,get:function(){return e}}),window.dispatchEvent(i),i.defaultPrevented||console.error(e)}function i(){var t=this;this.g=void 0,this.F=new Promise(function(e){t.l=e})}function t(e){var t=document;this.l=void 0,this.h=e,this.g=t,q(this.h,this.g),"loading"===this.g.readyState&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function r(e){e.l&&e.l.disconnect()}function Y(e){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(e){return e()},this.i=!1,this.v=[],this.h=e,this.D=e.I?new t(e):void 0}function ee(e,t){if(!o(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(oe(e,t))throw Error("A custom element with name '"+t+"' has already been defined.");if(e.A)throw Error("A custom element is already being defined.")}function te(e,t,n){var o;e.A=!0;try{var a=n.prototype;if(!(a instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var i=function(e){var t=a[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},r=i("connectedCallback"),l=i("disconnectedCallback"),s=i("adoptedCallback"),c=(o=i("attributeChangedCallback"))&&n.observedAttributes||[]}catch(e){throw e}finally{e.A=!1}return e.u.set(t,n={localName:t,constructorFunction:n,connectedCallback:r,disconnectedCallback:l,adoptedCallback:s,attributeChangedCallback:o,observedAttributes:c,constructionStack:[]}),e.C.set(n.constructorFunction,n),n}function ne(o){if(!1!==o.i){o.i=!1;for(var a=[],e=o.v,i=new Map,t=0;t<e.length;t++)i.set(e[t],[]);for(q(o.h,document,{upgrade:function(e){var t,n;void 0===e.__CE_state&&(t=e.localName,(n=i.get(t))?n.push(e):o.u.has(t)&&a.push(e))}}),t=0;t<a.length;t++)J(o.h,a[t]);for(t=0;t<e.length;t++){for(var n=e[t],r=i.get(n),l=0;l<r.length;l++)J(o.h,r[l]);(n=o.B.get(n))&&n.resolve(void 0)}e.length=0}}function oe(e,t){var n=e.u.get(t);if(n)return n;if(n=e.s.get(t)){e.s.delete(t);try{return te(e,t,n())}catch(e){X(e)}}}function ae(l,e,t){function n(r){return function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var n=[],o=[],a=0;a<t.length;a++){var i=t[a];if(i instanceof Element&&V(i)&&o.push(i),i instanceof DocumentFragment)for(i=i.firstChild;i;i=i.nextSibling)n.push(i);else n.push(i)}for(r.apply(this,t),t=0;t<o.length;t++)K(l,o[t]);if(V(this))for(t=0;t<n.length;t++)(o=n[t])instanceof Element&&W(l,o)}}void 0!==t.prepend&&(e.prepend=n(t.prepend)),void 0!==t.append&&(e.append=n(t.append))}function ie(r){function t(e,i){Object.defineProperty(e,"innerHTML",{enumerable:i.enumerable,configurable:!0,get:i.get,set:function(e){var t=this,n=void 0;if(V(this)&&(n=[],$(r,this,function(e){e!==t&&n.push(e)})),i.set.call(this,e),n)for(var o=0;o<n.length;o++){var a=n[o];1===a.__CE_state&&r.disconnectedCallback(a)}return(this.ownerDocument.__CE_registry?q:Z)(r,this),e}})}function e(e,o){e.insertAdjacentElement=function(e,t){var n=V(t);return e=o.call(this,e,t),n&&K(r,t),V(e)&&W(r,t),e}}function n(e,o){function a(e,t){for(var n=[];e!==t;e=e.nextSibling)n.push(e);for(t=0;t<n.length;t++)q(r,n[t])}e.insertAdjacentHTML=function(e,t){if("beforebegin"===(e=e.toLowerCase())){var n=this.previousSibling;o.call(this,e,t),a(n||this.parentNode.firstChild,this)}else if("afterbegin"===e)n=this.firstChild,o.call(this,e,t),a(this.firstChild,n);else if("beforeend"===e)n=this.lastChild,o.call(this,e,t),a(n||this.firstChild,null);else{if("afterend"!==e)throw new SyntaxError("The value provided ("+String(e)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");n=this.nextSibling,o.call(this,e,t),a(this.nextSibling,n)}}}var o,l,a;function i(r){return function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var n=[],o=[],a=0;a<t.length;a++){var i=t[a];if(i instanceof Element&&V(i)&&o.push(i),i instanceof DocumentFragment)for(i=i.firstChild;i;i=i.nextSibling)n.push(i);else n.push(i)}for(r.apply(this,t),t=0;t<o.length;t++)K(l,o[t]);if(V(this))for(t=0;t<n.length;t++)(o=n[t])instanceof Element&&W(l,o)}}b&&(Element.prototype.attachShadow=function(e){if(e=b.call(this,e),r.j&&!e.__CE_patched){e.__CE_patched=!0;for(var t=0;t<r.m.length;t++)r.m[t](e)}return this.__CE_shadowRoot=e}),S&&S.get?t(Element.prototype,S):x&&x.get?t(HTMLElement.prototype,x):(a=function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return g.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName,n=t?this.content:this,o=c.call(document,this.namespaceURI,this.localName);for(o.innerHTML=e;0<n.childNodes.length;)v.call(n,n.childNodes[0]);for(e=t?o.content:o;0<e.childNodes.length;)f.call(n,e.childNodes[0])}})},(o=r).j=!0,o.g.push(a)),Element.prototype.setAttribute=function(e,t){if(1!==this.__CE_state)return _.call(this,e,t);var n=C.call(this,e);_.call(this,e,t),t=C.call(this,e),r.attributeChangedCallback(this,e,n,t,null)},Element.prototype.setAttributeNS=function(e,t,n){if(1!==this.__CE_state)return D.call(this,e,t,n);var o=T.call(this,e,t);D.call(this,e,t,n),n=T.call(this,e,t),r.attributeChangedCallback(this,t,o,n,e)},Element.prototype.removeAttribute=function(e){if(1!==this.__CE_state)return k.call(this,e);var t=C.call(this,e);k.call(this,e),null!==t&&r.attributeChangedCallback(this,e,t,null,null)},Element.prototype.removeAttributeNS=function(e,t){if(1!==this.__CE_state)return N.call(this,e,t);var n=T.call(this,e,t);N.call(this,e,t);var o=T.call(this,e,t);n!==o&&r.attributeChangedCallback(this,t,n,o,e)},R?e(HTMLElement.prototype,R):B&&e(Element.prototype,B),U?n(HTMLElement.prototype,U):L&&n(Element.prototype,L),ae(r,Element.prototype,{prepend:O,append:I}),l=r,a=Element.prototype,void 0!==M&&(a.before=i(M)),void 0!==F&&(a.after=i(F)),void 0!==A&&(a.replaceWith=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var n=[],o=[],a=0;a<t.length;a++){var i=t[a];if(i instanceof Element&&V(i)&&o.push(i),i instanceof DocumentFragment)for(i=i.firstChild;i;i=i.nextSibling)n.push(i);else n.push(i)}for(a=V(this),A.apply(this,t),t=0;t<o.length;t++)K(l,o[t]);if(a)for(K(l,this),t=0;t<n.length;t++)(o=n[t])instanceof Element&&W(l,o)}),void 0!==j&&(a.remove=function(){var e=V(this);j.call(this),e&&K(l,this)})}z.prototype.connectedCallback=function(e){var t=e.__CE_definition;if(t.connectedCallback)try{t.connectedCallback.call(e)}catch(e){X(e)}},z.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;if(t.disconnectedCallback)try{t.disconnectedCallback.call(e)}catch(e){X(e)}},z.prototype.attributeChangedCallback=function(e,t,n,o,a){var i=e.__CE_definition;if(i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(t))try{i.attributeChangedCallback.call(e,t,n,o,a)}catch(e){X(e)}},i.prototype.resolve=function(e){if(this.g)throw Error("Already resolved.");this.g=e,this.l(e)},t.prototype.G=function(e){var t=this.g.readyState;for("interactive"!==t&&"complete"!==t||r(this),t=0;t<e.length;t++)for(var n=e[t].addedNodes,o=0;o<n.length;o++)q(this.h,n[o])},Y.prototype.H=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");ee(this,e),this.s.set(e,t),this.v.push(e),this.i||(this.i=!0,this.o(function(){return ne(n)}))},Y.prototype.define=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");ee(this,e),te(this,e,t),this.v.push(e),this.i||(this.i=!0,this.o(function(){return ne(n)}))},Y.prototype.upgrade=function(e){q(this.h,e)},Y.prototype.get=function(e){if(e=oe(this,e))return e.constructorFunction},Y.prototype.whenDefined=function(e){if(!o(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.B.get(e);if(t)return t.F;t=new i,this.B.set(e,t);var n=this.u.has(e)||this.s.has(e);return e=-1===this.v.indexOf(e),n&&e&&t.resolve(void 0),t.F},Y.prototype.polyfillWrapFlushCallback=function(t){this.D&&r(this.D);var n=this.o;this.o=function(e){return t(function(){return n(e)})}},(window.CustomElementRegistry=Y).prototype.polyfillDefineLazy=Y.prototype.H;var re={};var le=window.customElements;function e(){var i,n,r,e,t,o=new z;function a(){var e=this.constructor,t=document.__CE_registry.C.get(e);if(!t)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var n=t.constructionStack;if(0===n.length)return n=s.call(document,t.localName),Object.setPrototypeOf(n,e.prototype),n.__CE_state=1,n.__CE_definition=t,Q(i,n),n;var o=n.length-1,a=n[o];if(a===re)throw Error("Failed to construct '"+t.localName+"': This element was already constructed.");return n[o]=re,Object.setPrototypeOf(a,e.prototype),Q(i,a),a}function l(e,i){Object.defineProperty(e,"textContent",{enumerable:i.enumerable,configurable:!0,get:i.get,set:function(e){if(this.nodeType===Node.TEXT_NODE)i.set.call(this,e);else{var t=void 0;if(this.firstChild){var n=this.childNodes,o=n.length;if(0<o&&V(this))for(var t=Array(o),a=0;a<o;a++)t[a]=n[a]}if(i.set.call(this,e),t)for(e=0;e<t.length;e++)K(r,t[e])}}})}i=o,a.prototype=P.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:a}),window.HTMLElement=a,n=o,Document.prototype.createElement=function(e){return G(n,this,e,null)},Document.prototype.importNode=function(e,t){return e=u.call(this,e,!!t),(this.__CE_registry?q:Z)(n,e),e},Document.prototype.createElementNS=function(e,t){return G(n,this,t,e)},ae(n,Document.prototype,{prepend:d,append:h}),ae(o,DocumentFragment.prototype,{prepend:m,append:p}),r=o,Node.prototype.insertBefore=function(e,t){if(e instanceof DocumentFragment){var n=H(e);if(e=y.call(this,e,t),V(this))for(t=0;t<n.length;t++)W(r,n[t]);return e}return n=e instanceof Element&&V(e),t=y.call(this,e,t),n&&K(r,e),V(this)&&W(r,e),t},Node.prototype.appendChild=function(e){if(e instanceof DocumentFragment){var t=H(e);if(e=f.call(this,e),V(this))for(var n=0;n<t.length;n++)W(r,t[n]);return e}return t=e instanceof Element&&V(e),n=f.call(this,e),t&&K(r,e),V(this)&&W(r,e),n},Node.prototype.cloneNode=function(e){return e=g.call(this,!!e),(this.ownerDocument.__CE_registry?q:Z)(r,e),e},Node.prototype.removeChild=function(e){var t=e instanceof Element&&V(e),n=v.call(this,e);return t&&K(r,e),n},Node.prototype.replaceChild=function(e,t){if(e instanceof DocumentFragment){var n=H(e);if(e=w.call(this,e,t),V(this))for(K(r,t),t=0;t<n.length;t++)W(r,n[t]);return e}var n=e instanceof Element&&V(e),o=w.call(this,e,t),a=V(this);return a&&K(r,t),n&&K(r,e),a&&W(r,e),o},E&&E.get?l(Node.prototype,E):(t=function(e){l(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;t=t.nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")},set:function(e){for(;this.firstChild;)v.call(this,this.firstChild);null!=e&&""!==e&&f.call(this,document.createTextNode(e))}})},(e=r).j=!0,e.m.push(t)),ie(o),o=new Y(o),document.__CE_registry=o,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:o})}le&&!le.forcePolyfill&&"function"==typeof le.define&&"function"==typeof le.get||e(),window.__CE_installPolyfill=e}.call(self);const visualSettingsKey="youTubeGamingPlus.visualSettings",chatUsersKey="youTubeGamingPlus.chatters",defaultVisualSettings={chat:{nameColor:!0,icon:!0,showDeleted:!1,simulatedDelay:!1,separatedLines:!0,bttvEmotes:!0,ffzEmotes:!0},theatreMode:!0,showReplayChat:!0,qualityOptimization:!1},defaultChatElements={target:document.createElement("div"),app:void 0,innerBody:void 0,dropdown:void 0,modes:void 0,inputRenderer:void 0,textInputFieldRenderer:void 0,inputField:void 0,ironDropdown:void 0,dropdownContent:void 0},supportedChannels=[{youtube:{name:"blurrypenguin",enable:!0},twitch:{name:"blurrypenguin",id:134609363}},{youtube:{name:"valkyrae",enable:!0},twitch:{name:"valkyrae",id:79615025}},{youtube:{name:"courage",enable:!0},twitch:{name:"couragejd",id:106125347}},{youtube:{name:"timthetatman",enable:!0},twitch:{name:"timthetatman",id:36769016}},{youtube:{name:"drlupo",enable:!0},twitch:{name:"drlupo",id:29829912}},{youtube:{name:"ludwig",enable:!1},twitch:{name:"ludwig",id:40934651}}],defaultEmoji={emojiId:"ytg-0674b390-c5e2-464a-bc48-8ff6c70a03d6",image:{accessibility:{accessibilityData:{label:"yt"}},thumbnails:[{height:24,url:"",width:24},{height:48,url:"",width:48}]},isCustomEmoji:!0,searchTerms:[""],shortcuts:["::"]},defaultElement=document.createElement("empty");class Chrome{static getProto=e=>e.constructor.prototype||Object.getPrototypeOf(e);static getMethods=t=>{let n=new Set,e=t;for(;Object.getOwnPropertyNames(e).map(e=>n.add(e)),e=Object.getPrototypeOf(e););return[...n.keys()].filter(e=>"function"==typeof t[e])};static getProps=e=>{let t=[];for(;null!=e;e=Object.getPrototypeOf(e)){var n=Object.getOwnPropertyNames(e);for(let e=0;e<n.length;e++)-1==t.indexOf(n[e])&&t.push(n[e])}return t};static getFunctions=e=>{e=e.constructor.prototype;return Object.getOwnPropertyNames(e).filter(e=>"function"==typeof String.prototype[e])}}class Utils{static isNumber=e=>"number"==typeof e&&isFinite(e);static isBoolean=e=>"boolean"==typeof val;static canRun=(e,t)=>!!e.test(t);static uuid=()=>crypto.randomUUID();static uuid4=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));static exists=e=>null!=e;static invalidElement=e=>!this.exists(e)||""===e.tagName||"empty"===e.tagName;static generatePastelColor=()=>{let e=(Math.floor(127*Math.random()+127)<<16)+(Math.floor(127*Math.random()+127)<<8)+Math.floor(127*Math.random()+127);return"#"+e.toString(16)};static getDocument=e=>e.contentDocument||e.contentWindow.document;static zt=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?function(e){return ShadyDOM.patch(e)}:function(e){return e};static fire=(e,t,n)=>{n=n||{},t=null==t?{}:t;const o=new Event(e,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:!!n.cancelable,composed:void 0===n.composed||n.composed});return o.detail=t,window.dispatchEvent(o),o};static getMethods=t=>{let n=new Set,e=t;for(;Object.getOwnPropertyNames(e).map(e=>n.add(e)),e=Object.getPrototypeOf(e););return[...n.keys()].filter(e=>"function"==typeof t[e])};static randomInt=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;static splitMessage=e=>{return e.split(/\s*(<[^>]*>)|[\s.,?!\/]/gim).filter(Boolean)};static emoteToImage=({provider:e,src:t,code:n,id:o})=>`<img class="emoji ${e} yt-formatted-string style-scope yt-live-chat-text-message-renderer" src="${t}" alt="${n}" title="${n}" shared-tooltip-text="${n}" id="emoji-${e}-${o}" />`;static insertImages=(e,t)=>Object.entries({[t.code]:t}).reduce((e,[,{provider:t,src:n,code:o,id:a}])=>e.replace(new RegExp(`[s+]?${o}[s+]?`),`<img class="emoji ${t} yt-formatted-string style-scope yt-live-chat-text-message-renderer" src="${n}" alt="${o}" title="${o}" shared-tooltip-text="${o}" id="emoji-${t}-${a}" />`),e);static fetchJSON=async(e,t={node:"cors"})=>{try{const n=await(e=>{if(!e.ok)throw Error(e.statusText);return e})(await fetch(e,t));return n.json()}catch(e){throw Error(e)}};static camelCaseToDashed=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase());static dashToCamelCase=e=>e.split("-").reduce((e,t)=>e+t.charAt(0).toUpperCase()+t.slice(1));static dataToKey=e=>{const t=this.dashToCamelCase(e).replace("data-","");return t.charAt(0).toLowerCase()+t.slice(1)};static setAttributes=(t,n)=>Object.keys(n).forEach(e=>t.setAttribute(e,n[e]));static setDataAttributes=(t,n={})=>Object.keys(n).forEach(e=>t.setAttribute("data-"+this.camelCaseToDashed(e),n[e]));static getDataAttributes=e=>{let t={};var n=e.dataset;for(const a in n){var o=n[a];this.isBoolean(o)?t[a]=Boolean(o):this.isNumber(o)?t[a]=Number(o):t[a]=o}return t};static sendMessage=async o=>new Promise((t,n)=>{chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{type:"youtubegaming+",system:"ytg+",tabId:e[0].id,...o},e=>chrome.runtime.lastError?n({success:!1,data:o,error:chrome.runtime.lastError.message}):t(e))})});static A={OverrideFunction:0,RunBefore:1,RunAfter:2};static C=(e,t,{locked:n})=>({functionName:e,function:t,locked:n||!1,type:this.A.RunBefore});static I=async(e,n)=>{console.log(customElements),await customElements.whenDefined(e);const t=customElements.get(e);if(console.log(t),t){const o=t.prototype[n.functionName];t.prototype[n.functionName]=function(...e){if(o.apply(this,e),n.type===Utils.A.OverrideFunction)try{return n.function.apply(this,e)}catch(e){console.error(JSON.stringify(n)),console.error(e)}if(n.type===Utils.A.RunBefore)try{n.function.apply(this,e)}catch(e){console.error(e)}let t=o.apply(this,e);if(n.type===Utils.A.RunAfter)try{t=n.function.apply(this,[t])}catch(e){console.error(e)}return t},console.log(t)}else console.warn(`Polymer: ${e} not found`)}}class Storage{static removeLocal=async(e="")=>{try{return await chrome.storage.local.remove(e),!0}catch{throw new Error(!1)}};static removeSync=async(e="")=>{try{return await chrome.storage.sync.remove(e),!0}catch{throw new Error(!1)}};static getLocalBytesInUse=async(e="")=>{try{var t=await chrome.storage.local.getBytesInUse(e);return Promise.resolve(t)}catch{throw new Error(!1)}};static getSyncBytesInUse=async(e="")=>{try{var t=await chrome.storage.sync.getBytesInUse(e);return Promise.resolve(t)}catch{throw new Error(!1)}};static getLocal=async(e="",t=null)=>{try{var n=await chrome.storage.local.get(e);return Promise.resolve(n[e]??t)}catch{throw new Error(t)}};static getSync=async(e="",t=null)=>{try{var n=await chrome.storage.sync.get(e);return Promise.resolve(n[e]??t)}catch{throw new Error(t)}};static setLocal=async(e="",t=null)=>{try{return await this.removeLocal(e),await chrome.storage.local.set({[e]:t}),Promise.resolve(!0)}catch{throw new Error(t)}};static setSync=async(e="",t=null)=>{try{return await this.removeSync(e),await chrome.storage.sync.set({[e]:t}),Promise.resolve(!0)}catch{throw new Error(t)}}}const statusTmr=void 0;let _settings={visual:defaultVisualSettings},lastLoad={visual:defaultVisualSettings},elements={general:{RefreshBtn:document.getElementById("refreshBtn"),SaveBtn:document.getElementById("saveBtn"),SectionStatus:document.getElementById("sectionStatus"),Loading:document.getElementById("loading"),Loaded:document.getElementById("loaded")},visual:{Section:document.getElementById("sectionVisual"),TheatreMode:document.getElementById("chkTheatreMode"),ShowReplayChat:document.getElementById("chkShowReplayChat"),QualityOptimization:document.getElementById("chkQualityOptimization"),chat:{Section:document.getElementById("sectionChat"),NameColor:document.getElementById("chkNameColor"),UserIcon:document.getElementById("chkUserIcon"),ShowDeleted:document.getElementById("chkShowDeleted"),SimulatedDelay:document.getElementById("chkSimulatedDelay"),SeparatedLines:document.getElementById("chkSeparatedLines"),BTTVEmotes:document.getElementById("chkBTTVEmotes"),FFZEmotes:document.getElementById("chkFFZEmotes")}}};const toggleSwitch=(e,t=!0)=>{(t=void 0===t?!0:t)?e.setAttribute("checked",""):e.removeAttribute("checked")},getSwitchValue=e=>!!e.hasAttribute("checked"),enableSave=()=>{elements.general.SaveBtn.style.display="block"},disableSave=()=>{elements.general.SaveBtn.style.display="none"},refresh=()=>{disableSave(),elements.general.Loading.style.display="block",elements.general.Loaded.style.display="none",_settings={...lastLoad},setUI().finally(()=>{elements.general.Loading.style.display="none",elements.general.Loaded.style.display="block"})},setUI=()=>new Promise(e=>{var t=_settings.visual;t.theatreMode?toggleSwitch(elements.visual.TheatreMode,!0):toggleSwitch(elements.visual.TheatreMode,!1),t.showReplayChat?toggleSwitch(elements.visual.ShowReplayChat,!0):toggleSwitch(elements.visual.ShowReplayChat,!1),t.qualityOptimization?toggleSwitch(elements.visual.QualityOptimization,!0):toggleSwitch(elements.visual.QualityOptimization,!1),t.chat.nameColor?toggleSwitch(elements.visual.chat.NameColor,!0):toggleSwitch(elements.visual.chat.NameColor,!1),t.chat.icon?toggleSwitch(elements.visual.chat.UserIcon,!0):toggleSwitch(elements.visual.chat.UserIcon,!1),t.chat.showDeleted?toggleSwitch(elements.visual.chat.ShowDeleted,!0):toggleSwitch(elements.visual.chat.ShowDeleted,!1),t.chat.simulatedDelay?toggleSwitch(elements.visual.chat.SimulatedDelay,!0):toggleSwitch(elements.visual.chat.SimulatedDelay,!1),t.chat.separatedLines?toggleSwitch(elements.visual.chat.SeparatedLines,!0):toggleSwitch(elements.visual.chat.SeparatedLines,!1),t.chat.bttvEmotes?toggleSwitch(elements.visual.chat.BTTVEmotes,!0):toggleSwitch(elements.visual.chat.BTTVEmotes,!1),t.chat.ffzEmotes?toggleSwitch(elements.visual.chat.FFZEmotes,!0):toggleSwitch(elements.visual.chat.FFZEmotes,!1),e()}),save=()=>{let o={..._settings};o.visual.theatreMode=getSwitchValue(elements.visual.TheatreMode),o.visual.showReplayChat=getSwitchValue(elements.visual.ShowReplayChat),o.visual.qualityOptimization=getSwitchValue(elements.visual.QualityOptimization),o.visual.chat.nameColor=getSwitchValue(elements.visual.chat.NameColor),o.visual.chat.icon=getSwitchValue(elements.visual.chat.UserIcon),o.visual.chat.showDeleted=getSwitchValue(elements.visual.chat.ShowDeleted),o.visual.chat.simulatedDelay=getSwitchValue(elements.visual.chat.SimulatedDelay),o.visual.chat.separatedLines=getSwitchValue(elements.visual.chat.SeparatedLines),o.visual.chat.bttvEmotes=getSwitchValue(elements.visual.chat.BTTVEmotes),o.visual.chat.ffzEmotes=getSwitchValue(elements.visual.chat.FFZEmotes),Utils.sendMessage({system:"settings",action:"setSync",key:visualSettingsKey,data:o.visual}).then(()=>{const e=document.getElementById("status");return e.textContent="Status: Saved!",elements.general.SectionStatus.style.display="block",o}).catch(async e=>{try{await Storage.setSync(visualSettingsKey,o.visual);const t=document.getElementById("status");return elements.general.SectionStatus.style.display="block",t.textContent="Status: Saved!",o}catch{console.error("save sendMessage",e);const n=document.getElementById("status");return n.textContent="Status: Failed to save!",elements.general.SectionStatus.style.display="block",o}}).finally(()=>{_settings={...o},lastLoad={...o},setTimeout(()=>{const e=document.getElementById("status");e.textContent="Status: waiting...",elements.general.SectionStatus.style.display="none"},1500),disableSave()})},loadSettings=()=>{elements.general.Loading.style.display="block",elements.general.Loaded.style.display="none";let t={...defaultVisualSettings};Utils.sendMessage({system:"settings",action:"getSync",key:visualSettingsKey,data:defaultVisualSettings}).then(e=>{e=void 0!==e&&e.data?e.data:{};return t={...defaultVisualSettings,...e},t}).catch(async()=>{var e=await Storage.getSync(visualSettingsKey,JSON.stringify(defaultVisualSettings));return t={...defaultVisualSettings,...e},t}).finally(()=>{_settings.visual={...t},lastLoad.visual={...t},setUI().finally(()=>{elements.general.Loading.style.display="none",elements.general.Loaded.style.display="block"})})},setElements=()=>{elements={general:{RefreshBtn:document.getElementById("refreshBtn"),SaveBtn:document.getElementById("saveBtn"),SectionStatus:document.getElementById("sectionStatus"),Loading:document.getElementById("loading"),Loaded:document.getElementById("loaded")},visual:{Section:document.getElementById("sectionVisual"),TheatreMode:document.getElementById("chkTheatreMode"),ShowReplayChat:document.getElementById("chkShowReplayChat"),QualityOptimization:document.getElementById("chkQualityOptimization"),chat:{Section:document.getElementById("sectionChat"),NameColor:document.getElementById("chkNameColor"),UserIcon:document.getElementById("chkUserIcon"),ShowDeleted:document.getElementById("chkShowDeleted"),SimulatedDelay:document.getElementById("chkSimulatedDelay"),SeparatedLines:document.getElementById("chkSeparatedLines"),BTTVEmotes:document.getElementById("chkBTTVEmotes"),FFZEmotes:document.getElementById("chkFFZEmotes")}}},elements.general.RefreshBtn.addEventListener("click",refresh),elements.general.SaveBtn.addEventListener("click",save),elements.visual.TheatreMode.addEventListener("click",()=>{elements.visual.TheatreMode.checked?toggleSwitch(elements.visual.TheatreMode,!0):toggleSwitch(elements.visual.TheatreMode,!1),enableSave()},!1),elements.visual.ShowReplayChat.addEventListener("click",()=>{elements.visual.ShowReplayChat.checked?toggleSwitch(elements.visual.ShowReplayChat,!0):toggleSwitch(elements.visual.ShowReplayChat,!1),enableSave()},!1),elements.visual.QualityOptimization.addEventListener("click",()=>{elements.visual.QualityOptimization.checked?toggleSwitch(elements.visual.QualityOptimization,!0):toggleSwitch(elements.visual.QualityOptimization,!1),enableSave()},!1),elements.visual.chat.NameColor.addEventListener("click",()=>{elements.visual.chat.NameColor.checked?toggleSwitch(elements.visual.chat.NameColor,!0):toggleSwitch(elements.visual.chat.NameColor,!1),enableSave()},!1),elements.visual.chat.UserIcon.addEventListener("click",()=>{elements.visual.chat.UserIcon.checked?toggleSwitch(elements.visual.chat.UserIcon,!0):toggleSwitch(elements.visual.chat.UserIcon,!1),enableSave()},!1),elements.visual.chat.ShowDeleted.addEventListener("click",()=>{elements.visual.chat.ShowDeleted.checked?toggleSwitch(elements.visual.chat.ShowDeleted,!0):toggleSwitch(elements.visual.chat.ShowDeleted,!1),enableSave()},!1),elements.visual.chat.SimulatedDelay.addEventListener("click",()=>{elements.visual.chat.SimulatedDelay.checked?toggleSwitch(elements.visual.chat.SimulatedDelay,!0):toggleSwitch(elements.visual.chat.SimulatedDelay,!1),enableSave()},!1),elements.visual.chat.SeparatedLines.addEventListener("click",()=>{elements.visual.chat.SeparatedLines.checked?toggleSwitch(elements.visual.chat.SeparatedLines,!0):toggleSwitch(elements.visual.chat.SeparatedLines,!1),enableSave()},!1),elements.visual.chat.BTTVEmotes.addEventListener("click",()=>{elements.visual.chat.BTTVEmotes.checked?toggleSwitch(elements.visual.chat.BTTVEmotes,!0):toggleSwitch(elements.visual.chat.BTTVEmotes,!1),enableSave()},!1),elements.visual.chat.FFZEmotes.addEventListener("click",()=>{elements.visual.chat.FFZEmotes.checked?toggleSwitch(elements.visual.chat.FFZEmotes,!0):toggleSwitch(elements.visual.chat.FFZEmotes,!1),enableSave()},!1),loadSettings()};window.onload=()=>{0<document.getElementsByClassName("ytg-plus-settings-root").length&&setElements()};