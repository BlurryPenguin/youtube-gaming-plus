!function(){const o="youTubeGamingPlus.chatters";chrome.tabs.onUpdated.addListener(function(e,t,n){t&&t.url&&chrome.tabs.sendMessage(e,{type:"youtubegaming+",system:"background",action:"urlChange",tab:n}),t&&"complete"===t.status&&chrome.tabs.sendMessage(e,{type:"youtubegaming+",system:"background",action:"tabChange",tab:n})}),chrome.runtime.onMessageExternal.addListener(function(e,t,n){let o=e;return o.success=!0,n(o),!0}),chrome.runtime.onMessage.addListener((e,t,n)=>{if(console.log(e),console.log(t),e.type&&"youtubegaming+"===e.type&&e.system&&"general"===e.system){if(e.action&&"executeScript"===e.action){t=getTabId();return chrome.scripting.executeScript({target:{tabId:t},files:["src/chat/emotesInjected.js"]}),n(t),!0}e.action&&"getCurrentTab"===e.action&&!async function(){var[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e}().then(e=>{n(e)}).finall(()=>!0)}});const s=n=>{chrome.storage.local.get(o,e=>{const t=e[o]??[];chrome.storage.local.set({"youTubeGamingPlus.chatters":t},()=>n(t))})};chrome.runtime.onUpdateAvailable.addListener(e=>{console.log("onUpdateAvailable"),s(e=>{chrome.runtime.reload(),chrome.storage.local.set({"youTubeGamingPlus.chatters":e},()=>cb(e))})}),chrome.runtime.onInstalled.addListener(t=>{const n=chrome.runtime.getManifest().version,o=t.previousVersion;"update"===t.reason?s(()=>{chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{type:"youtubegaming+",system:"background",action:"extensionUpdate",details:t,currentVersion:n,previousVersion:o})})}):chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{type:"youtubegaming+",system:"background",action:"unknown",details:t,currentVersion:n,previousVersion:o})})}),chrome.action.onClicked.addListener(function(e){chrome.tabs.create({url:chrome.runtime.getURL("/src/popup/settings.html")})})}();