!function(){const r="youTubeGamingPlus.chatters";chrome.tabs.onUpdated.addListener(function(e,t,n){t&&t.url&&chrome.tabs.sendMessage(e,{type:"youtubegaming+",system:"background",action:"urlChange",tab:n}),t&&"complete"===t.status&&chrome.tabs.sendMessage(e,{type:"youtubegaming+",system:"background",action:"tabChange",tab:n})}),chrome.runtime.onMessageExternal.addListener(function(e,t,n){let r=e;return r.success=!0,n(r),!0}),chrome.runtime.onMessage.addListener((e,t,n)=>{if(e.type&&"youtubegaming+"===e.type&&e.system&&"general"===e.system){if(e.action&&"executeScript"===e.action){var r=getTabId();return chrome.scripting.executeScript({target:{tabId:r},files:["src/chat/emotesInjected.js"]}),n(r),!0}e.action&&"getCurrentTab"===e.action&&!async function(){var[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e}().then(e=>{n(e)}).finall(()=>!0)}});const s=n=>{chrome.storage.local.get(r,e=>{const t=e[r]??[];chrome.storage.local.set({"youTubeGamingPlus.chatters":t},()=>n(t))})};chrome.runtime.onUpdateAvailable.addListener(e=>{s(e=>{chrome.runtime.reload(),chrome.storage.local.set({"youTubeGamingPlus.chatters":e},()=>cb(e))})}),chrome.runtime.onInstalled.addListener(t=>{const n=chrome.runtime.getManifest().version,r=t.previousVersion;"update"===t.reason?s(()=>{chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{type:"youtubegaming+",system:"background",action:"extensionUpdate",details:t,currentVersion:n,previousVersion:r})})}):chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{type:"youtubegaming+",system:"background",action:"unknown",details:t,currentVersion:n,previousVersion:r})})}),chrome.action.onClicked.addListener(function(e){chrome.tabs.create({url:chrome.runtime.getURL("/src/popup/settings.html")})})}();